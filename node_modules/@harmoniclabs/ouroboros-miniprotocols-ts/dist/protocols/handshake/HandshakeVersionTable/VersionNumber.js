"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.VersionNumber = VersionNumber;
exports.toClientVersionNumber = toClientVersionNumber;
exports.adaptVersionNumberToMode = adaptVersionNumberToMode;
exports.isVersionNumber = isVersionNumber;
exports.isExtendedVersionNumber = isExtendedVersionNumber;
function VersionNumber(thing) {
    if (typeof thing === "bigint")
        return VersionNumber(Number(thing));
    if (!Number.isSafeInteger(thing) || thing < 0)
        return 0;
    return thing & 0x7fff;
}
function toClientVersionNumber(thing) {
    return VersionNumber(thing) | 0x8000;
}
function adaptVersionNumberToMode(thing, n2n) {
    return n2n ? VersionNumber(thing) : toClientVersionNumber(thing);
}
function isVersionNumber(thing) {
    if (typeof thing === "bigint")
        return isVersionNumber(Number(thing));
    return Number.isSafeInteger(thing) && thing === (thing & 0x7fff);
}
function isExtendedVersionNumber(thing) {
    if (typeof thing === "bigint")
        return isExtendedVersionNumber(Number(thing));
    return Number.isSafeInteger(thing) && thing === (thing & 0xffff);
}
