"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isValidPeerAddress = isValidPeerAddress;
exports.peerAddressFromCborObj = peerAddressFromCborObj;
var cbor_1 = require("@harmoniclabs/cbor");
var PeerAddressIPv4_1 = require("./PeerAddressIPv4.js");
var PeerAddressIPv6_1 = require("./PeerAddressIPv6.js");
function isValidPeerAddress(stuff) {
    if (stuff instanceof PeerAddressIPv4_1.PeerAddressIPv4)
        return (0, PeerAddressIPv4_1.isIPeerAddressIPv4)(stuff);
    if (stuff instanceof PeerAddressIPv6_1.PeerAddressIPv6)
        return (0, PeerAddressIPv6_1.isIPeerAddressIPv6)(stuff);
    return false;
}
function peerAddressFromCborObj(cbor) {
    if (!(cbor instanceof cbor_1.CborArray &&
        cbor.array[0] instanceof cbor_1.CborUInt &&
        cbor.array[0].num >= 0 &&
        cbor.array[0].num <= 1))
        throw new Error("invalid CBOR for `IPeerAddress`");
    var idx = Number(cbor.array[0].num);
    if (idx === 0)
        return PeerAddressIPv4_1.PeerAddressIPv4.fromCborObj(cbor);
    if (idx === 1)
        return PeerAddressIPv6_1.PeerAddressIPv6.fromCborObj(cbor);
    throw new Error("invalid CBOR for `IPeerAddress`");
}
