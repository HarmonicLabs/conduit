import { ToCbor, SubCborRef, CborString, CborObj, CanBeCborString } from "@harmoniclabs/cbor";
import { CanBeUInteger } from "@harmoniclabs/cbor/dist/utils/ints";
import { AuxiliaryDataHash, Hash32 } from "../../../hashes/index.js";
import { Coin, TxWithdrawals, ITxWithdrawals, Certificate } from "../../common/ledger/index.js";
import { LegacyPPUpdateProposal } from "../../common/LegacyPPUpdateProposal.js";
import { ShelleyTxOut } from "./index.js";
import { ShelleyUTxO } from "./ShelleyUTxO.js";
import { ToJson } from "../../../utils/ToJson.js";
export interface IShelleyTxBody {
    inputs: [ShelleyUTxO, ...ShelleyUTxO[]];
    outputs: ShelleyTxOut[];
    fee: Coin;
    ttl?: CanBeUInteger;
    certs?: Certificate[];
    withdrawals?: TxWithdrawals | ITxWithdrawals;
    protocolUpdate?: LegacyPPUpdateProposal;
    auxDataHash?: AuxiliaryDataHash;
}
export declare function isIShelleyTxBody(body: Readonly<object>): body is IShelleyTxBody;
export declare class ShelleyTxBody implements IShelleyTxBody, ToCbor, ToJson {
    readonly cborRef: SubCborRef | undefined;
    readonly inputs: [ShelleyUTxO, ...ShelleyUTxO[]];
    readonly outputs: ShelleyTxOut[];
    readonly fee: bigint;
    readonly ttl?: bigint;
    readonly certs?: Certificate[];
    readonly withdrawals?: TxWithdrawals;
    readonly protocolUpdate?: LegacyPPUpdateProposal;
    readonly auxDataHash?: AuxiliaryDataHash;
    /**
     * getter
     */
    get hash(): Hash32;
    private _isHashValid;
    private _hash;
    /**
     *
     * @param body object describing the transaction
     * @throws only if the the `body` parameter does not respect the `IConwayShelleyTxBody` interface
     *      **DOES NOT THROW** if the transaction is unbalanced; that needs to be checked using `ConwayShelleyTxBody.isValueConserved` static method
     */
    constructor(body: IShelleyTxBody, cborRef?: SubCborRef | undefined);
    toCborBytes(): Uint8Array;
    toCbor(): CborString;
    toCborObj(): CborObj;
    static fromCbor(cStr: CanBeCborString): ShelleyTxBody;
    static fromCborObj(cObj: CborObj): ShelleyTxBody;
    toJSON(): {
        inputs: {
            utxoRef: import("../../common/TxOutRef.js").UTxORefJson;
            resolved: {
                address: `addr1${string}` | `addr_test1${string}`;
                value: import("../../../ledger/index.js").ValueJson;
            };
        }[];
        outputs: {
            address: `addr1${string}` | `addr_test1${string}`;
            value: import("../../../ledger/index.js").ValueJson;
        }[];
        fee: string;
        ttl: string | undefined;
        certs: ({
            certType: "PoolRegistration";
            poolParams: {
                operator: string;
                vrfKeyHash: string;
                pledge: string;
                cost: string;
                margin: number;
                rewardAccount: import("../../common/ledger/index.js").StakeAddress<import("../../common/ledger/index.js").StakeAddressType>;
                owners: string[];
                relays: ({
                    type: string;
                    port: number | undefined;
                    ipv4: string | undefined;
                    ipv6: string | undefined;
                    dnsName?: undefined;
                } | {
                    type: string;
                    port: number | undefined;
                    dnsName: string;
                    ipv4?: undefined;
                    ipv6?: undefined;
                } | {
                    type: string;
                    dnsName: string;
                    port?: undefined;
                    ipv4?: undefined;
                    ipv6?: undefined;
                })[];
                metadata: {
                    poolMetadataUrl: string;
                    hash: string;
                } | undefined;
            };
        } | {
            certType: "PoolRetirement";
            poolHash: string;
            epoch: string;
        } | {
            certType: "StakeDeRegistration";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
        } | {
            certType: "StakeDelegation";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            poolKeyHash: string;
        } | {
            certType: "StakeRegistration";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
        } | {
            certType: "AuthCommitteeHot";
            coldCredential: {
                credentialType: string;
                hash: string;
            };
            hotCredential: {
                credentialType: string;
                hash: string;
            };
        } | {
            certType: "GenesisKeyDelegation";
            genesisHash: string;
            genesisDelegateHash: string;
            vrfKeyHash: string;
        } | {
            certType: "RegistrationDeposit";
            /**
             *
             * @param body object describing the transaction
             * @throws only if the the `body` parameter does not respect the `IConwayShelleyTxBody` interface
             *      **DOES NOT THROW** if the transaction is unbalanced; that needs to be checked using `ConwayShelleyTxBody.isValueConserved` static method
             */
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            deposit: string;
        } | {
            certType: "RegistrationDrep";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            coin: string;
            anchor: {
                url: string;
                anchorDataHash: string;
            } | null;
        } | {
            certType: "ResignCommitteeCold";
            coldCredential: {
                credentialType: string;
                hash: string;
            };
            anchor: {
                url: string;
                anchorDataHash: string;
            } | null;
        } | {
            certType: "StakeVoteDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            poolKeyHash: string;
            drep: {
                drepType: string;
            };
        } | {
            certType: "StakeVoteRegistrationDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            poolKeyHash: string;
            drep: {
                drepType: string;
            };
            coin: string;
        } | {
            certType: "UnRegistrationDeposit";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            deposit: string;
        } | {
            certType: "UnRegistrationDrep";
            drepCredential: {
                credentialType: string;
                hash: string;
            };
            coin: string;
        } | {
            /**
             * getter
             */
            certType: "UpdateDrep";
            drepCredential: {
                credentialType: string;
                hash: string;
            };
            anchor: {
                url: string;
                anchorDataHash: string;
            } | null;
        } | {
            certType: "VoteDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            drep: {
                drepType: string;
            };
        } | {
            certType: "VoteRegistrationDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            drep: {
                drepType: string;
            };
            coin: string;
        } | {
            certType: "MoveInstantRewards";
            source: "Reserves" | "Treasurery";
            destination: string | {
                stakeCreds: {
                    credentialType: string;
                    hash: string;
                };
                amount: string;
            }[];
        } | {
            certType: "StakeRegistrationDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            poolKeyHash: string;
            coin: string;
        })[] | undefined;
        withdrawals: {
            [rewardAccount: string]: string;
        } | undefined;
        protocolUpdate: object | undefined;
        auxDataHash: string | undefined;
    };
    toJson(): {
        inputs: {
            utxoRef: import("../../common/TxOutRef.js").UTxORefJson;
            resolved: {
                address: `addr1${string}` | `addr_test1${string}`;
                value: import("../../../ledger/index.js").ValueJson;
            };
        }[];
        outputs: {
            address: `addr1${string}` | `addr_test1${string}`;
            value: import("../../../ledger/index.js").ValueJson;
        }[];
        fee: string;
        ttl: string | undefined;
        certs: ({
            certType: "PoolRegistration";
            poolParams: {
                operator: string;
                vrfKeyHash: string;
                pledge: string;
                cost: string;
                margin: number;
                rewardAccount: import("../../common/ledger/index.js").StakeAddress<import("../../common/ledger/index.js").StakeAddressType>;
                owners: string[];
                relays: ({
                    type: string;
                    port: number | undefined;
                    ipv4: string | undefined;
                    ipv6: string | undefined;
                    dnsName?: undefined;
                } | {
                    type: string;
                    port: number | undefined;
                    dnsName: string;
                    ipv4?: undefined;
                    ipv6?: undefined;
                } | {
                    type: string;
                    dnsName: string;
                    port?: undefined;
                    ipv4?: undefined;
                    ipv6?: undefined;
                })[];
                metadata: {
                    poolMetadataUrl: string;
                    hash: string;
                } | undefined;
            };
        } | {
            certType: "PoolRetirement";
            poolHash: string;
            epoch: string;
        } | {
            certType: "StakeDeRegistration";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
        } | {
            certType: "StakeDelegation";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            poolKeyHash: string;
        } | {
            certType: "StakeRegistration";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
        } | {
            certType: "AuthCommitteeHot";
            coldCredential: {
                credentialType: string;
                hash: string;
            };
            hotCredential: {
                credentialType: string;
                hash: string;
            };
        } | {
            certType: "GenesisKeyDelegation";
            genesisHash: string;
            genesisDelegateHash: string;
            vrfKeyHash: string;
        } | {
            certType: "RegistrationDeposit";
            /**
             *
             * @param body object describing the transaction
             * @throws only if the the `body` parameter does not respect the `IConwayShelleyTxBody` interface
             *      **DOES NOT THROW** if the transaction is unbalanced; that needs to be checked using `ConwayShelleyTxBody.isValueConserved` static method
             */
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            deposit: string;
        } | {
            certType: "RegistrationDrep";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            coin: string;
            anchor: {
                url: string;
                anchorDataHash: string;
            } | null;
        } | {
            certType: "ResignCommitteeCold";
            coldCredential: {
                credentialType: string;
                hash: string;
            };
            anchor: {
                url: string;
                anchorDataHash: string;
            } | null;
        } | {
            certType: "StakeVoteDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            poolKeyHash: string;
            drep: {
                drepType: string;
            };
        } | {
            certType: "StakeVoteRegistrationDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            poolKeyHash: string;
            drep: {
                drepType: string;
            };
            coin: string;
        } | {
            certType: "UnRegistrationDeposit";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            deposit: string;
        } | {
            certType: "UnRegistrationDrep";
            drepCredential: {
                credentialType: string;
                hash: string;
            };
            coin: string;
        } | {
            /**
             * getter
             */
            certType: "UpdateDrep";
            drepCredential: {
                credentialType: string;
                hash: string;
            };
            anchor: {
                url: string;
                anchorDataHash: string;
            } | null;
        } | {
            certType: "VoteDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            drep: {
                drepType: string;
            };
        } | {
            certType: "VoteRegistrationDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            drep: {
                drepType: string;
            };
            coin: string;
        } | {
            certType: "MoveInstantRewards";
            source: "Reserves" | "Treasurery";
            destination: string | {
                stakeCreds: {
                    credentialType: string;
                    hash: string;
                };
                amount: string;
            }[];
        } | {
            certType: "StakeRegistrationDeleg";
            stakeCredential: {
                credentialType: string;
                hash: string;
            };
            poolKeyHash: string;
            coin: string;
        })[] | undefined;
        withdrawals: {
            [rewardAccount: string]: string;
        } | undefined;
        protocolUpdate: object | undefined;
        auxDataHash: string | undefined;
    };
    /**
     * tests that
     * inputs + withdrawals + refund + mints === outputs + burns + deposit + fee
     *
     * @todo add mints and burns
     * @deprecated until mints and burns are added
     */
    static isValueConserved(tx: ShelleyTxBody): boolean;
}
